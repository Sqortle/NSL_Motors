<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rezervasyon ve Ödeme - NSL MOTORS</title>
    <link rel="stylesheet" href="style.css"> 
</head>
<body>
    <div class="background-effects"></div>

    <header class="navbar glass-card">
        <div class="logo">NSL MOTORS</div>
        
        <div class="nav-right-group">
            <nav class="nav-links">
                <a href="index.html">Ana Sayfa</a>
                <a href="hakkimizda.html">Hakkımızda</a>
                <a href="iletisim.html">İletişim</a> 
            </nav>
            <div class="contact">
                <a href="profilim.html" id="login-link" class="contact-btn">Profilim</a>
            </div>
        </div>
    </header>

    <main class="container">
        <section id="reservation-full" class="page-section glass-card login-form-container" style="display: block; max-width: 650px;">
            
            <h1 class="section-title glass-text" style="text-align: center;">Tuning Rezervasyonunuz</h1>
            
            <div style="background: rgba(0, 224, 255, 0.1); padding: 20px; border-radius: 10px; border-left: 5px solid var(--main-accent); margin-bottom: 30px;">
                <p style="font-weight: bold; color: var(--main-accent);">Seçilen Hizmet:</p>
                <p id="selected-service-info" style="font-size: 1.1em; color: var(--text-color);">Yükleniyor...</p>
            </div>

            <form class="glass-form reservation-form">
                <h2 class="glass-text" style="font-size: 1.5em; margin-bottom: 30px;">Randevu Bilgileri</h2>

                <div class="form-group">
                    <label for="reservation-date-display">Tercih Edilen Randevu Tarihi</label>
                    <input type="text" id="reservation-date-display" class="glass-input" placeholder="Tarih Seçmek İçin Tıklayın" readonly onclick="showDatePickerModal()">
                    <input type="hidden" id="reservation-date-hidden" required>
                </div>

                <div class="form-group">
                    <label for="reservation-time">Tercih Edilen Saat Aralığı</label>
                    <input type="time" id="reservation-time" class="glass-input" required>
                </div>
                
                <h2 class="glass-text" style="font-size: 1.5em; margin-top: 40px; margin-bottom: 30px;">Ödeme Bilgileri (Ön Ödeme)</h2>

                <div style="background: rgba(0, 66, 37, 0.3); padding: 15px; border-radius: 8px; border: 1px solid var(--main-accent); margin-bottom: 20px;">
                    <p style="color: var(--secondary-accent); font-weight: bold;">Ön Ödeme Tutarı: 1.000 € (Toplam ücretten düşülecektir)</p>
                </div>

                <div class="form-group">
                    <label for="card-holder">Kart Üzerindeki İsim</label>
                    <input type="text" id="card-holder" class="glass-input" placeholder="Ad Soyad" required>
                </div>
                
                <div class="form-group">
                    <label for="card-number">Kart Numarası</label>
                    <input type="text" id="card-number" class="glass-input" placeholder="XXXX XXXX XXXX XXXX" maxlength="19" required>
                </div>

                <div style="display: flex; gap: 20px;">
                    <div class="form-group" style="flex: 2;">
                        <label for="card-expiry">Son Kullanma Tarihi</label>
                        <input type="text" id="card-expiry" class="glass-input" placeholder="AA/YY" maxlength="5" required>
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label for="card-cvc">CVC</label>
                        <input type="text" id="card-cvc" class="glass-input" placeholder="XXX" maxlength="3" required>
                    </div>
                </div>

                <button type="submit" class="btn primary-btn" style="margin-top: 20px;">Ön Ödemeyi Yap ve Rezervasyonu Onayla</button>
            </form>
        </section>
    </main>

    <div id="date-picker-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content glass-card" style="max-width: 400px; padding: 30px;">
            <button class="close-btn" onclick="document.getElementById('date-picker-modal').style.display='none'" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 1.5em; color: var(--secondary-accent); cursor: pointer;">&times;</button>
            <h3 class="glass-text" style="margin-bottom: 20px;">Randevu Tarihini Seçin</h3>
            
            <div class="calendar-display" style="padding: 15px; background: rgba(0, 66, 37, 0.2); border-radius: 8px; border: 1px solid var(--main-accent);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <button style="background: none; border: none; color: var(--secondary-accent); cursor: pointer; font-size: 1.2em;">&lt;</button>
                    <h4 class="glass-text" style="font-size: 1.2em;">Aralık 2025</h4>
                    <button style="background: none; border: none; color: var(--secondary-accent); cursor: pointer; font-size: 1.2em;">&gt;</button>
                </div>
                <div style="display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; font-size: 0.9em; color: rgba(255, 255, 255, 0.5); gap: 5px;">
                    <span>Pzt</span><span>Sal</span><span>Çar</span><span>Per</span><span>Cum</span><span>Cmt</span><span>Paz</span>
                </div>
                <div style="display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; gap: 5px; margin-top: 10px;">
                    <span style="color: rgba(255, 255, 255, 0.2);">29</span><span style="color: rgba(255, 255, 255, 0.2);">30</span>
                    <button class="day-btn" onclick="selectDateFromModal('2025-12-01')" style="padding: 8px; border-radius: 5px; background: rgba(255, 255, 255, 0.1); border: 1px solid transparent; color: var(--text-color); cursor: pointer;">1</button>
                    <button class="day-btn" onclick="selectDateFromModal('2025-12-15')" style="padding: 8px; border-radius: 5px; background: var(--main-accent); color: var(--bg-color); font-weight: bold; border: 1px solid var(--secondary-accent); cursor: pointer;">15</button>
                    <button class="day-btn" onclick="selectDateFromModal('2025-12-16')" style="padding: 8px; border-radius: 5px; background: rgba(255, 255, 255, 0.1); border: 1px solid transparent; color: var(--text-color); cursor: pointer;">16</button>
                </div>
            </div>
            
            <button class="btn primary-btn" style="width: 100%; margin-top: 20px;" onclick="selectDateFromModal('2025-12-15')">Tarihi Onayla (15 Aralık)</button>
        </div>
    </div>

    <script>
        // Seçilen modeli ve stage bilgisini URL'den alır
        function loadReservationDetails() {
            const params = new URLSearchParams(window.location.search);
            const stage = params.get('stage');
            const model = params.get('model');
            const infoElement = document.getElementById('selected-service-info');

            if (stage && model) {
                const modelName = model.toUpperCase().replace('-', ' '); 
                infoElement.innerHTML = `${modelName} - ${stage} Tuning Paketi`;
            } else {
                infoElement.textContent = "Lütfen Ana Sayfadan bir model ve aşama seçimi yapın.";
            }
        }

        document.addEventListener('DOMContentLoaded', loadReservationDetails);

        // Pop-up Fonksiyonları
        function showDatePickerModal() {
            document.getElementById('date-picker-modal').style.display = 'flex';
        }

        // Seçilen tarihi form alanına yazar ve modalı kapatır
        function selectDateFromModal(selectedDate) {
            // Varsayımsal tarih seçildi
            document.getElementById('reservation-date-display').value = new Date(selectedDate).toLocaleDateString('tr-TR', { day: '2-digit', month: 'long', year: 'numeric' });
            document.getElementById('reservation-date-hidden').value = selectedDate;
            document.getElementById('date-picker-modal').style.display = 'none';
        }
    </script>
</body>
</html>